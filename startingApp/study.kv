<RootWidget@FloatLayout>:
    canvas.before:
        Rectangle:
            source: "assets/StandardBackground.png"
            pos: self.pos
            size: self.size    
        
    ScreenManager:
        id: screen_manager
        
        ToDoScreen:
            name: "todo"
        
        FlashCardsScreen:
            name: "flashCards"
        
        TimerScreen:
            name: "timer"
        
        SettingsScreen:
            name: "settings"
            
            
<BottomNav@BoxLayout>:
    size_hint_y: None
    height: "50dp"
    spacing: 10
    padding: 20
   
    Button:
        text: "To-Do"
        on_press: app.root.ids.screen_manager.current = "todo"
    
    Button:
        text: "Flash Cards"
        on_press: app.root.ids.screen_manager.current = "flashCards"
    
    Button:
        text: "Timer"
        on_press: app.root.ids.screen_manager.current = "timer"
    
    Button:
        text: "Settings"
        on_press: app.root.ids.screen_manager.current = "settings"

<ToDoScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'
        Label: 
            text: "User 1 To Do List"
            height: dp(50)
        
        ScrollView:
            id: todo_list_scroll
            BoxLayout:
                id: todo_items_container
                orientation: 'vertical'
                size_hint_y: None
                heigth: self.minimum_height
        
        TextInput:
            id: new_task_input
            hint_text: "Add a new task..."
            size_hint_y: None
            height: dp(40)
        
        Button:
            text: "Add Task"
            size_hint_y: None
            height: dp(40)
            on_press: app.root.ids.screen_manager.get_screen('todo').addTask()
        
        BottomNav:
            
<FlashCardsScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 8

        # list area (starts empty; Python will populate it in on_pre_enter)
        RecycleView:
            id: rv
            viewclass: 'FlashCardRow'
            data: []   
            RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'

        BoxLayout:
            size_hint_y: None
            height: dp(48)
            Button:
                text: 'Add card'
                on_release: root.open_add_popup()

        BottomNav:

# Generate a row per flash card in the file.
<FlashCardRow@BoxLayout>:
    front: ''
    back: ''
    padding: 8
    Label:
        text: root.front
    Button:
        text: 'Flip'
        size_hint_x: None
        width: dp(72)
        # Call the screen method (root is the FlashCardRow widget; root.parent... might not be the screen)
        on_release: app.root.ids.screen_manager.get_screen('flashCards').show_back_popup(root.front, root.back)

<TimerScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'
        Label: 
            text: "This is the Timer Screen"
        
        BottomNav:
        
<SettingsScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'
        Label: 
            text: "This is the Settings Screen"
        
        BottomNav:
    
