<RootWidget@FloatLayout>:
    canvas.before:
        Rectangle:
            source: "assets/StandardBackground.png"
            pos: self.pos
            size: self.size  
            
    MDScreenManager:
        id: screen_manager_root
        ToDoScreen:
            name: "todo"
        FlashCardsScreen:
            name: "flashCards"
        TimerScreen:
            name: "timer"
        SettingsScreen:
            name: "settings"
        
    # Bottom Navigation Bar
    MDBoxLayout:
        id: bottom_nav
        size_hint_y: None
        height: dp(60)
        pos_hint: {"x": 0, "y": 0}
        spacing: dp(5)
        padding: dp(10)
        md_bg_color: 0.95, 0.95, 0.95, 1

        MDButton:
            style: "elevated"
            on_release: app.root.ids.screen_manager_root.current = "todo"
            MDButtonText:
                text: "To-Do"

        MDButton:
            style: "elevated"
            on_release: app.root.ids.screen_manager_root.current = "flashCards"
            MDButtonText:
                text: "Flash Cards"

        MDButton:
            style: "elevated"
            on_release: app.root.ids.screen_manager_root.current = "timer"
            MDButtonText:
                text: "Timer"

        MDButton:
            style: "elevated"
            on_release: app.root.ids.screen_manager_root.current = "settings"
            MDButtonText:
                text: "Settings"

<ToDoScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(10), dp(10), dp(10), dp(70) #left, top, right, bottom            
        
        ScrollView:
            MDBoxLayout:
                id: todo_items_container
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: dp(10)
                spacing: dp(10)

        
        # Expandable input box
        MDBoxLayout:
            id: input_box
            orientation: 'vertical'
            size_hint_y: None
            height: dp(60)
            spacing: dp(5)
            padding: dp(5)
            
            # Additional fields (hidden initially, opacity=0)
            MDTextField:
                fill_color: 0, 0, 0, 0  # Required transparency fix for dev version
                id: task_header_input
                mode: "outlined"

                MDTextFieldHintText:
                    text: "Input Task Header"

            
            MDTextField: #This one temporarily holds the text
                fill_color: 0, 0, 0, 0  # Required transparency fix for dev version
                id: task_description_input
                mode: "outlined"

                MDTextFieldHintText:
                    text: "Input Task Description"

            
            MDTextField:
                fill_color: 0, 0, 0, 0  # Required transparency fix for dev version
                id: task_date_input
                mode: "outlined"

                MDTextFieldHintText:
                    text: "Input Task Due Date (DD/MM/YYYY)"
            
            # Initial single-line input (at bottom, always visible initially)
            MDTextField:
                id: new_task_input
                mode: "outlined"
                fill_color: 0, 0, 0, 0  # Required transparency fix for dev version
                size_hint_y: None
                height: dp(40)
                on_focus: if self.focus: root.expand_input()

                MDTextFieldHintText:
                    text: "Add a new task..."
        
        MDButton:
            style: "elevated"
            size_hint_y: None
            height: dp(40)
            on_release: root.addTask()
            MDButtonText:
                text: "Add Task"
                #on_press: todolist.addTask()

        
        
                    
<FlashCardsScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 10, 10, 10, 90
        spacing: 8

        # list area (starts empty; Python will populate it in on_pre_enter)
        RecycleView:
            id: rv
            viewclass: 'FlashCardRow'
            data: []   
            RecycleBoxLayout:
                default_size: None, dp(56)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'

        BoxLayout:
            size_hint_y: None
            height: dp(48)
            MDButton:
                style: "elevated"
                on_release: root.open_add_dialog()
                MDButtonText:
                    text: "Add card"

# Generate a row per flash card in the file.
<FlashCardRow@BoxLayout>:
    front: ''
    back: ''
    padding: 8
    Label:
        text: root.front
    MDButton:
        style: "elevated"
        size_hint_x: None
        width: dp(72)
        # Call the screen method (root is the FlashCardRow widget; root.parent... might not be the screen)
        on_release: app.flashcards_screen.show_back_dialog(root.front, root.back)
        MDButtonText:
            text: "Flip"

<TimerScreen@MDScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(10), dp(10), dp(10), dp(70)

        # Timer display
        MDLabel: 
            id: timer_display
            text: "00:00"
            halign: "center"

        MDBoxLayout:
            id: buttons
            orientation: "horizontal"
            spacing: dp(20)
            size_hint_y: None
            size_hint_x: None
            width: self.minimum_width
            height: dp(50)
            halign: "center"
            pos_hint: {"center_x": 0.5}

            # Start button
            MDButton: 
                style: "elevated"
                height: dp(40)
                size_hint_x: None
                on_release: root.start_pomodoro()
                MDButtonText:
                    text: "Start"

            # Stop button
            MDButton: 
                style: "elevated"
                height: dp(40)
                size_hint_x: None
                on_release: root.stop_pomodoro()
                MDButtonText:
                    text: "Stop"

            # Reset button
            MDButton: 
                style: "elevated"
                height: dp(40)
                size_hint_x: None
                on_release: root.reset_pomodoro()
                MDButtonText:
                    text: "Reset"

        # Inputs
        MDBoxLayout: 
            id: timer_input_labels
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(60)
            spacing: dp(5)
            padding: dp(5)

            MDLabel:
                text: "Work Minutes"
                halign: "left"
                valign: "bottom"

            MDLabel:
                text: "Short Break Minutes"
                halign: "left"
                valign: "bottom"

            MDLabel:
                text: "Long Break Minutes"
                halign: "left"
                valign: "bottom"
                
            MDLabel:
                text: "Sessions"
                halign: "left"
                valign: "bottom"

        MDBoxLayout: 
            id: timer_input
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(5)
            spacing: dp(5)
            padding: dp(5)  
        
            MDTextField:
                id: work_minutes_input
                hint_text: "How many minutes do you want to work per session?"
                size_hint_y: None
                mode: "filled"
                text: "25"
                fill_color: 0.95, 0.95, 0.95, 1
                height: dp(30)

            MDTextField:
                id: short_break_minutes_input
                hint_text: "How many minutes for a short break?"
                size_hint_y: None
                mode: "filled"
                text: "5"
                fill_color: 0.95, 0.95, 0.95, 1
                height: dp(30)
            MDTextField:
                id: long_break_minutes_input
                hint_text: "How many minutes for a long break?"
                size_hint_y: None
                mode: "filled"
                text: "15"
                fill_color: 0.95, 0.95, 0.95, 1
                height: dp(30)

            MDTextField:    
                id: sessions_input
                hint_text: "How many work sessions would you like?"
                size_hint_y: None
                mode: "filled"
                text: "4"
                fill_color: 0.95, 0.95, 0.95, 1
                height: dp(30)
        
                
<SettingsScreen@MDScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        MDLabel: 
            text: "This is the Settings Screen"
            halign: "center"

       
    
